2025-08-27 15:02:16,638 [INFO] === TESTING IMPROVED LANGUAGE DETECTION ===
2025-08-27 15:02:16,639 [INFO] Using host: ws://localhost:5003
2025-08-27 15:02:16,639 [INFO] Languages: ['en-US', 'ar-SA']
2025-08-27 15:02:16,640 [INFO] Audio file: C:\Users\amantara\OneDrive - Microsoft\Documents\projects\Language_identification\audio\samples\Arabic_english_mix_optimized.wav
2025-08-27 15:02:16,640 [INFO] Output segments: C:\Users\amantara\OneDrive - Microsoft\Documents\projects\Language_identification\test_segments_improved.json
2025-08-27 15:02:16,640 [INFO] Checking container at localhost:5003...
2025-08-27 15:02:16,660 [INFO] [SUCCESS] Container at localhost:5003 is running and accessible
2025-08-27 15:02:17,359 [DEBUG] Starting new HTTP connection (1): localhost:5003
2025-08-27 15:02:17,412 [DEBUG] http://localhost:5003 "GET / HTTP/1.1" 200 168896
2025-08-27 15:02:17,422 [DEBUG] HTTP response status: 200
2025-08-27 15:02:17,423 [INFO] [SUCCESS] Container is responding to HTTP requests
2025-08-27 15:02:17,424 [INFO] 
Testing synchronous language detection...
2025-08-27 15:02:17,424 [INFO] Checking container connectivity at localhost:5003...
2025-08-27 15:02:17,444 [DEBUG] Container at localhost:5003 is reachable.
2025-08-27 15:02:17,445 [DEBUG] Successfully created SpeechConfig with host: ws://localhost:5003
2025-08-27 15:02:17,446 [DEBUG] Set language detection mode to Continuous
2025-08-27 15:02:17,447 [DEBUG] Created AudioConfig with file: audio/samples/Arabic_english_mix_optimized.wav
2025-08-27 15:02:17,448 [DEBUG] Created AutoDetectSourceLanguageConfig with languages: ['en-US', 'ar-SA']
2025-08-27 15:02:17,450 [DEBUG] Created SourceLanguageRecognizer successfully
2025-08-27 15:02:17,450 [INFO] Starting synchronous language recognition...
2025-08-27 15:02:22,344 [INFO] DETECTED LANGUAGE: en-us
2025-08-27 15:02:22,345 [INFO] Recognized text: 
2025-08-27 15:02:22,376 [INFO] [SUCCESS] SYNC TEST SUCCEEDED! Detected language: en-us
2025-08-27 15:02:22,376 [INFO] 
Testing full language detection with segments...
2025-08-27 15:02:22,376 [INFO] Starting language identification...
2025-08-27 15:02:22,376 [WARNING] Synchronous language detection failed, falling back to continuous method...
2025-08-27 15:02:22,377 [DEBUG] Set language detection mode to Continuous
2025-08-27 15:02:22,378 [INFO] Starting continuous language identification
2025-08-27 15:02:23,126 [INFO] LID event detected: en-us start=0.00s dur=1.5s
2025-08-27 15:02:23,126 [DEBUG] LID event detailed: lang=en-us start=0 dur=15000000
2025-08-27 15:02:23,126 [DEBUG] Start first segment lang=en-us start=0
2025-08-27 15:02:23,457 [INFO] LID event detected: en-us start=1.50s dur=1.0s
2025-08-27 15:02:23,457 [DEBUG] LID event detailed: lang=en-us start=14990000 dur=10000000
2025-08-27 15:02:23,735 [INFO] LID event detected: en-us start=2.50s dur=1.0s
2025-08-27 15:02:23,736 [DEBUG] LID event detailed: lang=en-us start=24990000 dur=10000000
2025-08-27 15:02:24,042 [INFO] LID event detected: en-us start=3.50s dur=1.0s
2025-08-27 15:02:24,044 [DEBUG] LID event detailed: lang=en-us start=34990000 dur=10000000
2025-08-27 15:02:24,429 [INFO] LID event detected: en-us start=4.50s dur=1.0s
2025-08-27 15:02:24,429 [DEBUG] LID event detailed: lang=en-us start=44990000 dur=10000000
2025-08-27 15:02:24,745 [INFO] LID event detected: ar-sa start=5.50s dur=1.0s
2025-08-27 15:02:24,745 [DEBUG] LID event detailed: lang=ar-sa start=54990000 dur=10000000
2025-08-27 15:02:24,745 [DEBUG] Language change en-us->ar-sa at 54990000
2025-08-27 15:02:24,745 [DEBUG] Closed segment id=0 lang=en-us start=0 end=54990000
2025-08-27 15:02:25,145 [INFO] LID event detected: ar-sa start=6.50s dur=1.0s
2025-08-27 15:02:25,145 [DEBUG] LID event detailed: lang=ar-sa start=64990000 dur=10000000
2025-08-27 15:02:25,522 [INFO] LID event detected: ar-sa start=7.50s dur=1.0s
2025-08-27 15:02:25,522 [DEBUG] LID event detailed: lang=ar-sa start=74990000 dur=10000000
2025-08-27 15:02:25,932 [INFO] LID event detected: en-us start=8.50s dur=1.0s
2025-08-27 15:02:25,932 [DEBUG] LID event detailed: lang=en-us start=84990000 dur=10000000
2025-08-27 15:02:25,933 [DEBUG] Language change ar-sa->en-us at 84990000
2025-08-27 15:02:25,933 [DEBUG] Closed segment id=1 lang=ar-sa start=54990000 end=84990000
2025-08-27 15:02:26,252 [INFO] LID event detected: en-us start=9.50s dur=1.0s
2025-08-27 15:02:26,252 [DEBUG] LID event detailed: lang=en-us start=94990000 dur=10000000
2025-08-27 15:02:26,543 [INFO] LID event detected: en-us start=10.50s dur=1.0s
2025-08-27 15:02:26,543 [DEBUG] LID event detailed: lang=en-us start=104990000 dur=10000000
2025-08-27 15:02:26,852 [INFO] LID event detected: ar-sa start=11.50s dur=1.0s
2025-08-27 15:02:26,853 [DEBUG] LID event detailed: lang=ar-sa start=114990000 dur=10000000
2025-08-27 15:02:26,853 [DEBUG] Language change en-us->ar-sa at 114990000
2025-08-27 15:02:26,853 [DEBUG] Closed segment id=2 lang=en-us start=84990000 end=114990000
2025-08-27 15:02:27,226 [INFO] LID event detected: ar-sa start=12.50s dur=1.0s
2025-08-27 15:02:27,226 [DEBUG] LID event detailed: lang=ar-sa start=124990000 dur=10000000
2025-08-27 15:02:27,385 [INFO] Successfully detected language; stopping early
2025-08-27 15:02:27,758 [INFO] LID event detected: ar-sa start=13.50s dur=1.601s
2025-08-27 15:02:27,759 [DEBUG] LID event detailed: lang=ar-sa start=134990000 dur=16010000
2025-08-27 15:02:27,810 [DEBUG] Recognition stopped/canceled event received
2025-08-27 15:02:27,811 [DEBUG] Closed segment id=3 lang=ar-sa start=114990000 end=151000000
2025-08-27 15:02:27,815 [INFO] Wrote segments to test_segments_improved.json
2025-08-27 15:02:27,859 [INFO] [SUCCESS] FULL TEST SUCCEEDED! Created segments file: test_segments_improved.json
2025-08-27 15:02:27,861 [INFO] Segments: {
  "audio": "audio/samples/Arabic_english_mix_optimized.wav",
  "segments": [
    {
      "id": 0,
      "language": "en-us",
      "start_hns": 0,
      "end_hns": 54990000,
      "start_sec": 0.0,
      "end_sec": 5.499
    },
    {
      "id": 1,
      "language": "ar-sa",
      "start_hns": 54990000,
      "end_hns": 84990000,
      "start_sec": 5.499,
      "end_sec": 8.499
    },
    {
      "id": 2,
      "language": "en-us",
      "start_hns": 84990000,
      "end_hns": 114990000,
      "start_sec": 8.499,
      "end_sec": 11.499
    },
    {
      "id": 3,
      "language": "ar-sa",
      "start_hns": 114990000,
      "end_hns": 151000000,
      "start_sec": 11.499,
      "end_sec": 15.1
    }
  ]
}
