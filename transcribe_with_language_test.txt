2025-08-27 15:14:08,797 [INFO] === TESTING COMPLETE LANGUAGE DETECTION AND TRANSCRIPTION ===
2025-08-27 15:14:08,798 [INFO] Using language detection host: ws://localhost:5003
2025-08-27 15:14:08,798 [INFO] Languages: ['en-US', 'ar-SA']
2025-08-27 15:14:08,798 [INFO] Audio file: C:\Users\amantara\OneDrive - Microsoft\Documents\projects\Language_identification\audio\samples\Arabic_english_mix_optimized.wav
2025-08-27 15:14:08,799 [INFO] Output segments: C:\Users\amantara\OneDrive - Microsoft\Documents\projects\Language_identification\test_segments_improved.json
2025-08-27 15:14:08,799 [INFO] Output transcript: C:\Users\amantara\OneDrive - Microsoft\Documents\projects\Language_identification\test_transcript.json
2025-08-27 15:14:08,799 [INFO] STT host mapping: {'en-us': 'ws://localhost:5004', 'ar-sa': 'ws://localhost:5005'}
2025-08-27 15:14:08,799 [INFO] 
Step 1: Detecting language segments...
2025-08-27 15:14:08,799 [INFO] Starting language identification...
2025-08-27 15:14:08,799 [WARNING] Synchronous language detection failed, falling back to continuous method...
2025-08-27 15:14:08,799 [DEBUG] Set language detection mode to Continuous
2025-08-27 15:14:08,802 [INFO] Starting continuous language identification
2025-08-27 15:14:10,476 [INFO] LID event detected: en-us start=0.00s dur=1.5s
2025-08-27 15:14:10,477 [DEBUG] LID event detailed: lang=en-us start=0 dur=15000000
2025-08-27 15:14:10,477 [DEBUG] Start first segment lang=en-us start=0
2025-08-27 15:14:11,293 [INFO] LID event detected: en-us start=1.50s dur=1.0s
2025-08-27 15:14:11,294 [DEBUG] LID event detailed: lang=en-us start=14990000 dur=10000000
2025-08-27 15:14:12,593 [INFO] LID event detected: en-us start=2.50s dur=1.0s
2025-08-27 15:14:12,593 [DEBUG] LID event detailed: lang=en-us start=24990000 dur=10000000
2025-08-27 15:14:13,811 [INFO] Successfully detected language; stopping early
2025-08-27 15:14:13,864 [INFO] LID event detected: en-us start=3.50s dur=1.0s
2025-08-27 15:14:13,866 [DEBUG] LID event detailed: lang=en-us start=34990000 dur=10000000
2025-08-27 15:14:15,096 [INFO] LID event detected: en-us start=4.50s dur=1.0s
2025-08-27 15:14:15,096 [DEBUG] LID event detailed: lang=en-us start=44990000 dur=10000000
2025-08-27 15:14:16,195 [INFO] LID event detected: ar-sa start=5.50s dur=1.0s
2025-08-27 15:14:16,196 [DEBUG] LID event detailed: lang=ar-sa start=54990000 dur=10000000
2025-08-27 15:14:16,196 [DEBUG] Language change en-us->ar-sa at 54990000
2025-08-27 15:14:16,197 [DEBUG] Closed segment id=0 lang=en-us start=0 end=54990000
2025-08-27 15:14:17,153 [INFO] LID event detected: ar-sa start=6.50s dur=1.0s
2025-08-27 15:14:17,155 [DEBUG] LID event detailed: lang=ar-sa start=64990000 dur=10000000
2025-08-27 15:14:18,168 [INFO] LID event detected: ar-sa start=7.50s dur=1.0s
2025-08-27 15:14:18,168 [DEBUG] LID event detailed: lang=ar-sa start=74990000 dur=10000000
2025-08-27 15:14:18,866 [INFO] LID event detected: en-us start=8.50s dur=1.0s
2025-08-27 15:14:18,867 [DEBUG] LID event detailed: lang=en-us start=84990000 dur=10000000
2025-08-27 15:14:18,867 [DEBUG] Language change ar-sa->en-us at 84990000
2025-08-27 15:14:18,867 [DEBUG] Closed segment id=1 lang=ar-sa start=54990000 end=84990000
2025-08-27 15:14:19,464 [INFO] LID event detected: en-us start=9.50s dur=1.0s
2025-08-27 15:14:19,464 [DEBUG] LID event detailed: lang=en-us start=94990000 dur=10000000
2025-08-27 15:14:20,171 [INFO] LID event detected: en-us start=10.50s dur=1.0s
2025-08-27 15:14:20,172 [DEBUG] LID event detailed: lang=en-us start=104990000 dur=10000000
2025-08-27 15:14:20,885 [INFO] LID event detected: ar-sa start=11.50s dur=1.0s
2025-08-27 15:14:20,886 [DEBUG] LID event detailed: lang=ar-sa start=114990000 dur=10000000
2025-08-27 15:14:20,887 [DEBUG] Language change en-us->ar-sa at 114990000
2025-08-27 15:14:20,887 [DEBUG] Closed segment id=2 lang=en-us start=84990000 end=114990000
2025-08-27 15:14:22,067 [INFO] LID event detected: ar-sa start=12.50s dur=1.0s
2025-08-27 15:14:22,068 [DEBUG] LID event detailed: lang=ar-sa start=124990000 dur=10000000
2025-08-27 15:14:23,078 [INFO] LID event detected: ar-sa start=13.50s dur=1.601s
2025-08-27 15:14:23,080 [DEBUG] LID event detailed: lang=ar-sa start=134990000 dur=16010000
2025-08-27 15:14:23,081 [DEBUG] Recognition stopped/canceled event received
2025-08-27 15:14:23,082 [DEBUG] Closed segment id=3 lang=ar-sa start=114990000 end=151000000
2025-08-27 15:14:23,085 [INFO] Wrote segments to test_segments_improved.json
2025-08-27 15:14:23,127 [INFO] 
Step 2: Loading language segments...
2025-08-27 15:14:23,129 [INFO] Found 4 language segments
2025-08-27 15:14:23,129 [INFO] 
Step 3: Transcribing each language segment...
2025-08-27 15:14:23,129 [INFO] Processing segment: en-us from 0.00s to 5.50s
2025-08-27 15:14:23,129 [INFO] Transcribing en-us segment using ws://localhost:5004
2025-08-27 15:14:23,129 [INFO] Processing segment from 0.00s to 54990000.00s
2025-08-27 15:14:23,130 [INFO] Created temporary segment file: C:\Users\amantara\AppData\Local\Temp\segment_en-us_0_54990000.wav
2025-08-27 15:14:23,189 [DEBUG] Recognizing speech from segment file
2025-08-27 15:14:24,496 [ERROR] Recognition canceled: CancellationReason.Error
2025-08-27 15:14:24,496 [ERROR] Error details: Connection failed (no connection to the remote host). Internal error: 11. Error details: Failed with error: WS_OPEN_ERROR_UNDERLYING_IO_ERROR
ws://localhost:5004/speech/recognition/interactive/cognitiveservices/v1?language=en-us
X-ConnectionId: da2de03237d34b7cb93b01c8ebc96c7b SessionId: da2de03237d34b7cb93b01c8ebc96c7b
2025-08-27 15:14:24,499 [WARNING] Failed to remove temporary file: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\amantara\\AppData\\Local\\Temp\\segment_en-us_0_54990000.wav'
2025-08-27 15:14:24,501 [INFO] Processing segment: ar-sa from 5.50s to 8.50s
2025-08-27 15:14:24,501 [INFO] Transcribing ar-sa segment using ws://localhost:5005
2025-08-27 15:14:24,501 [INFO] Processing segment from 5.50s to 8.50s
2025-08-27 15:14:24,505 [INFO] Created temporary segment file: C:\Users\amantara\AppData\Local\Temp\segment_ar-sa_5_3.wav
2025-08-27 15:14:24,533 [DEBUG] Recognizing speech from segment file
2025-08-27 15:14:25,693 [ERROR] Recognition canceled: CancellationReason.Error
2025-08-27 15:14:25,694 [ERROR] Error details: Connection failed (no connection to the remote host). Internal error: 11. Error details: Failed with error: WS_OPEN_ERROR_UNDERLYING_IO_ERROR
ws://localhost:5005/speech/recognition/interactive/cognitiveservices/v1?language=ar-sa
X-ConnectionId: bf58785334ce4094be3d7994bd380532 SessionId: bf58785334ce4094be3d7994bd380532
2025-08-27 15:14:25,696 [WARNING] Failed to remove temporary file: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\amantara\\AppData\\Local\\Temp\\segment_ar-sa_5_3.wav'
2025-08-27 15:14:25,698 [INFO] Processing segment: en-us from 8.50s to 11.50s
2025-08-27 15:14:25,699 [INFO] Transcribing en-us segment using ws://localhost:5004
2025-08-27 15:14:25,699 [INFO] Processing segment from 8.50s to 11.50s
2025-08-27 15:14:25,703 [INFO] Created temporary segment file: C:\Users\amantara\AppData\Local\Temp\segment_en-us_8_3.wav
2025-08-27 15:14:25,731 [DEBUG] Recognizing speech from segment file
2025-08-27 15:14:26,862 [ERROR] Recognition canceled: CancellationReason.Error
2025-08-27 15:14:26,863 [ERROR] Error details: Connection failed (no connection to the remote host). Internal error: 11. Error details: Failed with error: WS_OPEN_ERROR_UNDERLYING_IO_ERROR
ws://localhost:5004/speech/recognition/interactive/cognitiveservices/v1?language=en-us
X-ConnectionId: 7650a92557a044639cd4a65251791040 SessionId: 7650a92557a044639cd4a65251791040
2025-08-27 15:14:26,864 [WARNING] Failed to remove temporary file: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\amantara\\AppData\\Local\\Temp\\segment_en-us_8_3.wav'
2025-08-27 15:14:26,865 [INFO] Processing segment: ar-sa from 11.50s to 15.10s
2025-08-27 15:14:26,867 [INFO] Transcribing ar-sa segment using ws://localhost:5005
2025-08-27 15:14:26,868 [INFO] Processing segment from 11.50s to 15.10s
2025-08-27 15:14:26,874 [INFO] Created temporary segment file: C:\Users\amantara\AppData\Local\Temp\segment_ar-sa_11_3.wav
2025-08-27 15:14:26,909 [DEBUG] Recognizing speech from segment file
2025-08-27 15:14:28,052 [ERROR] Recognition canceled: CancellationReason.Error
2025-08-27 15:14:28,053 [ERROR] Error details: Connection failed (no connection to the remote host). Internal error: 11. Error details: Failed with error: WS_OPEN_ERROR_UNDERLYING_IO_ERROR
ws://localhost:5005/speech/recognition/interactive/cognitiveservices/v1?language=ar-sa
X-ConnectionId: e200ba4c8a1641e69463f6f6c5e4159b SessionId: e200ba4c8a1641e69463f6f6c5e4159b
2025-08-27 15:14:28,054 [WARNING] Failed to remove temporary file: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\amantara\\AppData\\Local\\Temp\\segment_ar-sa_11_3.wav'
2025-08-27 15:14:28,056 [INFO] 
Step 4: Creating final transcript...
2025-08-27 15:14:28,058 [INFO] Wrote complete transcript to test_transcript.json
2025-08-27 15:14:28,060 [INFO] Full transcript: 
